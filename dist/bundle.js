/*! For license information please see bundle.js.LICENSE.txt */
(()=>{var __webpack_modules__={"./src/configs/connectDB.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval('function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err); } _next(undefined); }); }; }\n\nvar _require = __webpack_require__(/*! sequelize */ "sequelize"),\n    Sequelize = _require.Sequelize;\n\nvar _require2 = __webpack_require__(/*! ./config.json */ "./src/configs/config.json"),\n    development = _require2.development;\n\nvar database = development.database,\n    host = development.host,\n    username = development.username,\n    password = development.password,\n    dialect = development.dialect,\n    logging = development.logging;\nvar sequelize = new Sequelize(database, username, password, {\n  host: host,\n  dialect: dialect,\n  logging: logging\n});\n\nvar connectDB = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n    return regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.prev = 0;\n            _context.next = 3;\n            return sequelize.authenticate();\n\n          case 3:\n            console.log("Connection has been established successfully.");\n            _context.next = 9;\n            break;\n\n          case 6:\n            _context.prev = 6;\n            _context.t0 = _context["catch"](0);\n            console.error("Unable to connect to the database:", _context.t0);\n\n          case 9:\n          case "end":\n            return _context.stop();\n        }\n      }\n    }, _callee, null, [[0, 6]]);\n  }));\n\n  return function connectDB() {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nmodule.exports = connectDB;\n\n//# sourceURL=webpack://shoes_project/./src/configs/connectDB.js?')},"./src/configs/viewEngine.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval('var express = __webpack_require__(/*! express */ "express");\n\nvar viewEngineConfig = function viewEngineConfig(app) {\n  app.use(express["static"]("./src/public"));\n  app.set("layout", "./layouts/main");\n  app.set("view engine", "ejs");\n  app.set("views", "./src/views");\n};\n\nmodule.exports = viewEngineConfig;\n\n//# sourceURL=webpack://shoes_project/./src/configs/viewEngine.js?')},"./src/controllers/auth.controller.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval('function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err); } _next(undefined); }); }; }\n\nvar dotenv = __webpack_require__(/*! dotenv */ "dotenv");\n\ndotenv.config();\n\nvar userService = __webpack_require__(/*! ../services/user.service */ "./src/services/user.service.js");\n\nvar bcrypt = __webpack_require__(/*! bcrypt */ "bcrypt");\n\nvar saltRounds = 10;\n\nvar _require = __webpack_require__(/*! ../util/handleJWT */ "./src/util/handleJWT.js"),\n    enCodedToken = _require.enCodedToken,\n    deCodedToken = _require.deCodedToken; //[POST] /sing-up\n\n\nvar signUp = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(req, res, next) {\n    var salt, password_hash, user, response, token;\n    return regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.prev = 0;\n            _context.next = 3;\n            return bcrypt.genSalt(10);\n\n          case 3:\n            salt = _context.sent;\n            _context.next = 6;\n            return bcrypt.hash(req.body.password, salt);\n\n          case 6:\n            password_hash = _context.sent;\n            //Create a User\n            user = _objectSpread(_objectSpread({}, req.body), {}, {\n              password_hash: password_hash\n            });\n            _context.next = 10;\n            return userService.createNewUser(user);\n\n          case 10:\n            response = _context.sent;\n            _context.next = 13;\n            return enCodedToken({\n              id: response.data.id,\n              username: response.data.username,\n              role_id: response.data.role_id\n            }, process.env.JWT_SECRET);\n\n          case 13:\n            token = _context.sent;\n            res.cookie("authorization", token);\n            return _context.abrupt("return", res.status(200).redirect("dashboard"));\n\n          case 18:\n            _context.prev = 18;\n            _context.t0 = _context["catch"](0);\n            next(_context.t0);\n\n          case 21:\n          case "end":\n            return _context.stop();\n        }\n      }\n    }, _callee, null, [[0, 18]]);\n  }));\n\n  return function signUp(_x, _x2, _x3) {\n    return _ref.apply(this, arguments);\n  };\n}(); //[POST] /sign-in\n\n\nvar signIn = /*#__PURE__*/function () {\n  var _ref2 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2(req, res, next) {\n    var _req$body, email, password, emails, listEmails, response, validPassword, token, statusUserUpdate;\n\n    return regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.prev = 0;\n            _req$body = req.body, email = _req$body.email, password = _req$body.password; //check emails\n\n            _context2.next = 4;\n            return userService.getFieldUsers(["email"]);\n\n          case 4:\n            emails = _context2.sent;\n            listEmails = [];\n            emails.data.forEach(function (e) {\n              listEmails.push(e.email);\n            });\n\n            if (!listEmails.includes(email)) {\n              res.render("sign-in", {\n                errorEmail: {\n                  message: "Invalid email!",\n                  filed: "email"\n                }\n              });\n            } //check password\n\n\n            _context2.next = 10;\n            return userService.getUser({\n              email: email\n            });\n\n          case 10:\n            response = _context2.sent;\n            _context2.next = 13;\n            return bcrypt.compare(password, response.data.password_hash);\n\n          case 13:\n            validPassword = _context2.sent;\n\n            if (!validPassword) {\n              res.render("sign-in", {\n                errorPassword: {\n                  message: "Invalid Password!",\n                  filed: "password"\n                }\n              });\n            } //endCodeToken and set to header\n\n\n            _context2.next = 17;\n            return enCodedToken({\n              id: response.data.id,\n              username: response.data.username,\n              role_id: response.data.role_id\n            }, process.env.JWT_SECRET);\n\n          case 17:\n            token = _context2.sent;\n            res.cookie("authorization", token, {\n              maxAge: parseInt(process.env.TIME_EXP) * 1000 * 60\n            });\n            res.cookie("username", response.data.username, {\n              maxAge: parseInt(process.env.TIME_EXP) * 1000 * 60\n            });\n            res.cookie("avatar", response.data.avatar, {\n              maxAge: parseInt(process.env.TIME_EXP) * 1000 * 60\n            }); //set status online\n\n            statusUserUpdate = {\n              status: 10\n            };\n            _context2.next = 24;\n            return userService.updateUser({\n              id: response.data.id\n            }, statusUserUpdate);\n\n          case 24:\n            return _context2.abrupt("return", res.status(200).redirect("dashboard"));\n\n          case 27:\n            _context2.prev = 27;\n            _context2.t0 = _context2["catch"](0);\n            next(_context2.t0);\n\n          case 30:\n          case "end":\n            return _context2.stop();\n        }\n      }\n    }, _callee2, null, [[0, 27]]);\n  }));\n\n  return function signIn(_x4, _x5, _x6) {\n    return _ref2.apply(this, arguments);\n  };\n}(); //[GET] /sign-in\n\n\nvar getFormSignIn = function getFormSignIn(req, res, next) {\n  try {\n    return res.render("sign-in");\n  } catch (err) {\n    next(err);\n  }\n}; //[GET] /sign-up\n\n\nvar getFormSignUp = function getFormSignUp(req, res, next) {\n  try {\n    return res.render("sign-up");\n  } catch (err) {\n    next(err);\n  }\n}; //[GET] /logout\n\n\nvar logout = /*#__PURE__*/function () {\n  var _ref3 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee3(req, res, next) {\n    var authorizationCookie, token, data, statusUserUpdate;\n    return regeneratorRuntime.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            _context3.prev = 0;\n            authorizationCookie = req.cookies.authorization; // \'Beaer [token]\'\n\n            token = authorizationCookie;\n            _context3.next = 5;\n            return deCodedToken(token, process.env.JWT_SECRET);\n\n          case 5:\n            data = _context3.sent;\n            //set status offline\n            statusUserUpdate = {\n              status: 1\n            };\n            _context3.next = 9;\n            return userService.updateUser({\n              id: data.id\n            }, statusUserUpdate);\n\n          case 9:\n            res.clearCookie("authorization");\n            res.clearCookie("username");\n            res.clearCookie("avatar");\n            res.redirect("dashboard");\n            _context3.next = 18;\n            break;\n\n          case 15:\n            _context3.prev = 15;\n            _context3.t0 = _context3["catch"](0);\n            next(_context3.t0);\n\n          case 18:\n          case "end":\n            return _context3.stop();\n        }\n      }\n    }, _callee3, null, [[0, 15]]);\n  }));\n\n  return function logout(_x7, _x8, _x9) {\n    return _ref3.apply(this, arguments);\n  };\n}();\n\nmodule.exports = {\n  signUp: signUp,\n  signIn: signIn,\n  getFormSignIn: getFormSignIn,\n  getFormSignUp: getFormSignUp,\n  logout: logout\n};\n\n//# sourceURL=webpack://shoes_project/./src/controllers/auth.controller.js?')},"./src/controllers/chatbot.controller.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval('var dotenv = __webpack_require__(/*! dotenv */ "dotenv");\n\ndotenv.config();\n\nvar getWebhook = function getWebhook(req, res, next) {\n  // Your verify token. Should be a random string.\n  var VERIFY_TOKEN = process.env.WEBHOOK_VERIFY_TOKEN; // Parse the query params\n\n  var mode = req.query["hub.mode"];\n  var token = req.query["hub.verify_token"];\n  var challenge = req.query["hub.challenge"]; // Checks if a token and mode is in the query string of the request\n\n  if (mode && token) {\n    // Checks the mode and token sent is correct\n    if (mode === "subscribe" && token === VERIFY_TOKEN) {\n      // Responds with the challenge token from the request\n      console.log("WEBHOOK_VERIFIED");\n      res.status(200).send(challenge);\n    } else {\n      // Responds with \'403 Forbidden\' if verify tokens do not match\n      res.sendStatus(403);\n    }\n  }\n};\n\nvar postWebhook = function postWebhook(req, res, next) {\n  var body = req.body; // Checks this is an event from a page subscription\n\n  if (body.object === "page") {\n    // Iterates over each entry - there may be multiple if batched\n    body.entry.forEach(function (entry) {\n      // Gets the message. entry.messaging is an array, but\n      // will only ever contain one message, so we get index 0\n      var webhook_event = entry.messaging[0];\n      console.log(webhook_event);\n    }); // Returns a \'200 OK\' response to all requests\n\n    res.status(200).send("EVENT_RECEIVED");\n  } else {\n    // Returns a \'404 Not Found\' if event is not from a page subscription\n    res.sendStatus(404);\n  }\n};\n\nmodule.exports = {\n  getWebhook: getWebhook,\n  postWebhook: postWebhook\n};\n\n//# sourceURL=webpack://shoes_project/./src/controllers/chatbot.controller.js?')},"./src/controllers/user.controller.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval('function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err); } _next(undefined); }); }; }\n\nvar dotenv = __webpack_require__(/*! dotenv */ "dotenv");\n\ndotenv.config();\n\nvar userService = __webpack_require__(/*! ../services/user.service */ "./src/services/user.service.js");\n\nvar bcrypt = __webpack_require__(/*! bcrypt */ "bcrypt");\n\nvar saltRounds = 10; //[GET] /users/create\n\nvar getCreate = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(req, res, next) {\n    return regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.prev = 0;\n            return _context.abrupt("return", res.render("users/create-user", {\n              nav: "newUser"\n            }));\n\n          case 4:\n            _context.prev = 4;\n            _context.t0 = _context["catch"](0);\n            next(_context.t0);\n\n          case 7:\n          case "end":\n            return _context.stop();\n        }\n      }\n    }, _callee, null, [[0, 4]]);\n  }));\n\n  return function getCreate(_x, _x2, _x3) {\n    return _ref.apply(this, arguments);\n  };\n}(); //[POST] /users/create\n\n\nvar create = /*#__PURE__*/function () {\n  var _ref2 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2(req, res, next) {\n    var response;\n    return regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.prev = 0;\n            _context2.next = 3;\n            return userService.createNewUser(req.body);\n\n          case 3:\n            response = _context2.sent;\n            return _context2.abrupt("return", res.status(200).redirect("/users"));\n\n          case 7:\n            _context2.prev = 7;\n            _context2.t0 = _context2["catch"](0);\n            next(_context2.t0);\n\n          case 10:\n          case "end":\n            return _context2.stop();\n        }\n      }\n    }, _callee2, null, [[0, 7]]);\n  }));\n\n  return function create(_x4, _x5, _x6) {\n    return _ref2.apply(this, arguments);\n  };\n}(); //[GET] /users\n\n\nvar getAll = /*#__PURE__*/function () {\n  var _ref3 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee3(req, res, next) {\n    var response;\n    return regeneratorRuntime.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            _context3.prev = 0;\n            _context3.next = 3;\n            return userService.getAllUser();\n\n          case 3:\n            response = _context3.sent;\n            return _context3.abrupt("return", res.status(200).render("users/users", {\n              users: response.data,\n              nav: "users"\n            }));\n\n          case 7:\n            _context3.prev = 7;\n            _context3.t0 = _context3["catch"](0);\n            next(_context3.t0);\n\n          case 10:\n          case "end":\n            return _context3.stop();\n        }\n      }\n    }, _callee3, null, [[0, 7]]);\n  }));\n\n  return function getAll(_x7, _x8, _x9) {\n    return _ref3.apply(this, arguments);\n  };\n}(); //[GET] /users/:id\n\n\nvar getOne = /*#__PURE__*/function () {\n  var _ref4 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee4(req, res, next) {\n    var response;\n    return regeneratorRuntime.wrap(function _callee4$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            _context4.prev = 0;\n            _context4.next = 3;\n            return userService.getUser({\n              id: req.params.id\n            });\n\n          case 3:\n            response = _context4.sent;\n            return _context4.abrupt("return", res.status(200).json(response));\n\n          case 7:\n            _context4.prev = 7;\n            _context4.t0 = _context4["catch"](0);\n            next(_context4.t0);\n\n          case 10:\n          case "end":\n            return _context4.stop();\n        }\n      }\n    }, _callee4, null, [[0, 7]]);\n  }));\n\n  return function getOne(_x10, _x11, _x12) {\n    return _ref4.apply(this, arguments);\n  };\n}(); //[GET] /count\n\n\nvar countAndGet = /*#__PURE__*/function () {\n  var _ref5 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee5(req, res, next) {\n    var response;\n    return regeneratorRuntime.wrap(function _callee5$(_context5) {\n      while (1) {\n        switch (_context5.prev = _context5.next) {\n          case 0:\n            _context5.prev = 0;\n            _context5.next = 3;\n            return userService.countAndGetUsers();\n\n          case 3:\n            response = _context5.sent;\n            return _context5.abrupt("return", res.status(200).json(response));\n\n          case 7:\n            _context5.prev = 7;\n            _context5.t0 = _context5["catch"](0);\n            next(_context5.t0);\n\n          case 10:\n          case "end":\n            return _context5.stop();\n        }\n      }\n    }, _callee5, null, [[0, 7]]);\n  }));\n\n  return function countAndGet(_x13, _x14, _x15) {\n    return _ref5.apply(this, arguments);\n  };\n}(); //[GET] users/:id/edit\n\n\nvar getUpdate = /*#__PURE__*/function () {\n  var _ref6 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee6(req, res, next) {\n    var response;\n    return regeneratorRuntime.wrap(function _callee6$(_context6) {\n      while (1) {\n        switch (_context6.prev = _context6.next) {\n          case 0:\n            _context6.prev = 0;\n            _context6.next = 3;\n            return userService.getUser({\n              id: req.params.id\n            });\n\n          case 3:\n            response = _context6.sent;\n            return _context6.abrupt("return", res.status(200).render("users/edit-user", {\n              user: response.data\n            }));\n\n          case 7:\n            _context6.prev = 7;\n            _context6.t0 = _context6["catch"](0);\n            next(_context6.t0);\n\n          case 10:\n          case "end":\n            return _context6.stop();\n        }\n      }\n    }, _callee6, null, [[0, 7]]);\n  }));\n\n  return function getUpdate(_x16, _x17, _x18) {\n    return _ref6.apply(this, arguments);\n  };\n}(); //[PUT] users/:id/edit\n\n\nvar update = /*#__PURE__*/function () {\n  var _ref7 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee7(req, res, next) {\n    var response, user;\n    return regeneratorRuntime.wrap(function _callee7$(_context7) {\n      while (1) {\n        switch (_context7.prev = _context7.next) {\n          case 0:\n            _context7.prev = 0;\n            _context7.next = 3;\n            return userService.updateUser({\n              id: req.params.id\n            }, req.body);\n\n          case 3:\n            response = _context7.sent;\n            _context7.next = 6;\n            return userService.getUser({\n              id: req.params.id\n            });\n\n          case 6:\n            user = _context7.sent;\n            return _context7.abrupt("return", res.status(200).render("users/edit-user", {\n              user: user.data,\n              message: "success"\n            }));\n\n          case 10:\n            _context7.prev = 10;\n            _context7.t0 = _context7["catch"](0);\n            next(_context7.t0);\n\n          case 13:\n          case "end":\n            return _context7.stop();\n        }\n      }\n    }, _callee7, null, [[0, 10]]);\n  }));\n\n  return function update(_x19, _x20, _x21) {\n    return _ref7.apply(this, arguments);\n  };\n}(); //[PUT] users/:id/change-password\n\n\nvar changePassword = /*#__PURE__*/function () {\n  var _ref8 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee8(req, res, next) {\n    var _req$body, current_password, new_password, response, validPassword, passwordUserUpdate;\n\n    return regeneratorRuntime.wrap(function _callee8$(_context8) {\n      while (1) {\n        switch (_context8.prev = _context8.next) {\n          case 0:\n            _context8.prev = 0;\n            _req$body = req.body, current_password = _req$body.current_password, new_password = _req$body.new_password;\n            _context8.next = 4;\n            return userService.getUser({\n              id: req.params.id\n            });\n\n          case 4:\n            response = _context8.sent;\n            _context8.next = 7;\n            return bcrypt.compare(current_password, response.data.password_hash);\n\n          case 7:\n            validPassword = _context8.sent;\n\n            if (!validPassword) {\n              res.status(400).render("users/edit-user", {\n                user: response.data,\n                errorCurrentPassword: {\n                  message: "Invalid Password!",\n                  filed: "current_password"\n                }\n              });\n            } //set new password\n\n\n            passwordUserUpdate = {\n              password: new_password\n            };\n            _context8.next = 12;\n            return userService.updateUser({\n              id: response.data.id\n            }, passwordUserUpdate);\n\n          case 12:\n            return _context8.abrupt("return", res.status(200).render("users/edit-user", {\n              user: response.data,\n              message: "success"\n            }));\n\n          case 15:\n            _context8.prev = 15;\n            _context8.t0 = _context8["catch"](0);\n            next(_context8.t0);\n\n          case 18:\n          case "end":\n            return _context8.stop();\n        }\n      }\n    }, _callee8, null, [[0, 15]]);\n  }));\n\n  return function changePassword(_x22, _x23, _x24) {\n    return _ref8.apply(this, arguments);\n  };\n}(); //[PUT] users/:id/edit-avatar\n\n\nvar editAvatar = /*#__PURE__*/function () {\n  var _ref9 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee9(req, res, next) {\n    var response, user;\n    return regeneratorRuntime.wrap(function _callee9$(_context9) {\n      while (1) {\n        switch (_context9.prev = _context9.next) {\n          case 0:\n            _context9.prev = 0;\n            _context9.next = 3;\n            return userService.updateUser({\n              id: req.params.id\n            }, req.body);\n\n          case 3:\n            response = _context9.sent;\n            _context9.next = 6;\n            return userService.getUser({\n              id: req.params.id\n            });\n\n          case 6:\n            user = _context9.sent;\n            return _context9.abrupt("return", res.status(200).render("users/edit-user", {\n              user: user.data,\n              message: "success"\n            }));\n\n          case 10:\n            _context9.prev = 10;\n            _context9.t0 = _context9["catch"](0);\n            next(_context9.t0);\n\n          case 13:\n          case "end":\n            return _context9.stop();\n        }\n      }\n    }, _callee9, null, [[0, 10]]);\n  }));\n\n  return function editAvatar(_x25, _x26, _x27) {\n    return _ref9.apply(this, arguments);\n  };\n}(); //[DELETE] users/:id/delete\n\n\nvar remove = /*#__PURE__*/function () {\n  var _ref10 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee10(req, res, next) {\n    var response;\n    return regeneratorRuntime.wrap(function _callee10$(_context10) {\n      while (1) {\n        switch (_context10.prev = _context10.next) {\n          case 0:\n            _context10.prev = 0;\n            _context10.next = 3;\n            return userService.deleteUser({\n              id: req.params.id\n            });\n\n          case 3:\n            response = _context10.sent;\n            return _context10.abrupt("return", res.status(200).send("message: success"));\n\n          case 7:\n            _context10.prev = 7;\n            _context10.t0 = _context10["catch"](0);\n            next(_context10.t0);\n\n          case 10:\n          case "end":\n            return _context10.stop();\n        }\n      }\n    }, _callee10, null, [[0, 7]]);\n  }));\n\n  return function remove(_x28, _x29, _x30) {\n    return _ref10.apply(this, arguments);\n  };\n}(); //[GET] users/:id/preview\n\n\nvar preview = /*#__PURE__*/function () {\n  var _ref11 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee11(req, res, next) {\n    var response;\n    return regeneratorRuntime.wrap(function _callee11$(_context11) {\n      while (1) {\n        switch (_context11.prev = _context11.next) {\n          case 0:\n            _context11.prev = 0;\n            _context11.next = 3;\n            return userService.getUser({\n              id: req.params.id\n            });\n\n          case 3:\n            response = _context11.sent;\n            return _context11.abrupt("return", res.status(200).render("users/user-preview", {\n              user: response.data\n            }));\n\n          case 7:\n            _context11.prev = 7;\n            _context11.t0 = _context11["catch"](0);\n            next(_context11.t0);\n\n          case 10:\n          case "end":\n            return _context11.stop();\n        }\n      }\n    }, _callee11, null, [[0, 7]]);\n  }));\n\n  return function preview(_x31, _x32, _x33) {\n    return _ref11.apply(this, arguments);\n  };\n}();\n\nmodule.exports = {\n  create: create,\n  getAll: getAll,\n  getOne: getOne,\n  countAndGet: countAndGet,\n  update: update,\n  remove: remove,\n  getCreate: getCreate,\n  getUpdate: getUpdate,\n  changePassword: changePassword,\n  editAvatar: editAvatar,\n  preview: preview\n};\n\n//# sourceURL=webpack://shoes_project/./src/controllers/user.controller.js?')},"./src/middlewares/auth.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval('function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err); } _next(undefined); }); }; }\n\nvar dotenv = __webpack_require__(/*! dotenv */ "dotenv");\n\ndotenv.config();\n\nvar _require = __webpack_require__(/*! ../util/handleJWT */ "./src/util/handleJWT.js"),\n    deCodedToken = _require.deCodedToken; //auth token\n\n\nvar authToken = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(req, res, next) {\n    var authorizationCookie, token, data;\n    return regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.prev = 0;\n            authorizationCookie = req.cookies.authorization; // \'Beaer [token]\'\n\n            token = authorizationCookie;\n\n            if (!token) {\n              res.redirect("/sign-in").render("sign-in", {\n                message: "unauthorize!"\n              });\n            }\n\n            _context.next = 6;\n            return deCodedToken(token, process.env.JWT_SECRET);\n\n          case 6:\n            data = _context.sent;\n            //send data to next middleware\n            res.locals.data = data;\n            next();\n            _context.next = 14;\n            break;\n\n          case 11:\n            _context.prev = 11;\n            _context.t0 = _context["catch"](0);\n            next(_context.t0);\n\n          case 14:\n          case "end":\n            return _context.stop();\n        }\n      }\n    }, _callee, null, [[0, 11]]);\n  }));\n\n  return function authToken(_x, _x2, _x3) {\n    return _ref.apply(this, arguments);\n  };\n}(); //auth admin users\n\n\nvar authRole = function authRole(roles) {\n  return function (req, res, next) {\n    try {\n      var data = res.locals.data;\n\n      if (roles.includes(data.role_id)) {\n        return next();\n      } else {\n        var err = new Error("Forbidden!");\n        err.status = 403;\n        return next(err);\n      }\n    } catch (err) {\n      next(err);\n    }\n  };\n};\n\nmodule.exports = {\n  authToken: authToken,\n  authRole: authRole\n};\n\n//# sourceURL=webpack://shoes_project/./src/middlewares/auth.js?')},"./src/middlewares/cors.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval('var dotenv = __webpack_require__(/*! dotenv */ "dotenv");\n\ndotenv.config();\n\nvar cors = function cors(req, res, next) {\n  //URL allow to connect\n  res.setHeader("Access-Control-Allow-Origin", process.env.URL); //Request methods allow\n\n  res.setHeader("Access-Control-Allow-Methods", "GET, POST, PUT, PATCH, DELETE, OPTIONS"); //Request header allow\n\n  res.setHeader("Access-Control-Allow-Headers", "X-Requested-With,content-type"); //Allow cookies in sent requests\n\n  res.setHeader("Access-Control-Allow-Credentials", true);\n  next();\n};\n\nmodule.exports = cors;\n\n//# sourceURL=webpack://shoes_project/./src/middlewares/cors.js?')},"./src/middlewares/errorHandle.js":module=>{eval('var errorHandle = function errorHandle(err, req, res, next) {\n  err.status = err.status || 500; // ObjectID: not found\n\n  if (err.kind === "ObjectID") {\n    err.status = 404;\n    err.message = "The ".concat(req.originalUrl, " is not found because wrong id");\n  } //Duplication\n\n\n  if (err.message && err.message.code == "ER_DUP_ENTRY") {\n    err.message = err.message.sqlMessage;\n  } //res to client\n\n\n  res.status(err.status).json({\n    error: {\n      status: "fail",\n      message: err.message\n    }\n  });\n};\n\nmodule.exports = errorHandle;\n\n//# sourceURL=webpack://shoes_project/./src/middlewares/errorHandle.js?')},"./src/middlewares/handleFile.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval('var path = __webpack_require__(/*! path */ "path");\n\nvar multer = __webpack_require__(/*! multer */ "multer");\n\nvar imgFilter = __webpack_require__(/*! ../util/imgFilter */ "./src/util/imgFilter.js");\n\nvar storageDiskFile = __webpack_require__(/*! ../util/storageDiskFile */ "./src/util/storageDiskFile.js");\n\nvar handleFile = function handleFile(fieldName) {\n  var upload = multer({\n    storage: storageDiskFile(path.join(__dirname, "../public/assets/img/avatar-user")),\n    fileFilter: imgFilter\n  }).single(fieldName);\n  return function (req, res, next) {\n    try {\n      upload(req, res, function (err) {\n        // req.file contains information of uploaded file\n        // req.body contains information of text fields, if there were any\n        // console.log(req.file);\n        // console.log(req.body);\n        if (req.fileValidationError) {\n          throw new Error(req.fileValidationError);\n        } else if (!req.file) {\n          throw new Error("Please select an image to upload");\n        } else if (err instanceof multer.MulterError) {\n          throw new Error(err);\n        } else if (err) {\n          throw new Error(err);\n        }\n\n        req.body.avatar = req.file.filename;\n        next();\n      });\n    } catch (err) {\n      next(err);\n    }\n  };\n};\n\nmodule.exports = handleFile;\n\n//# sourceURL=webpack://shoes_project/./src/middlewares/handleFile.js?')},"./src/middlewares/validateData.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval('function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar Joi = __webpack_require__(/*! joi */ "joi");\n\nvar validateBody = function validateBody(schema) {\n  return function (req, res, next) {\n    try {\n      var validateResult = schema.validate(req.body);\n\n      if (validateResult.error) {\n        var err = new Error(validateResult.error);\n        err.status = 400;\n        return next(err);\n      } else {\n        req.body = _objectSpread({}, validateResult.value);\n        next();\n      }\n    } catch (err) {\n      next(err);\n    }\n  };\n};\n\nvar validateParam = function validateParam(schema, param) {\n  return function (req, res, next) {\n    try {\n      var validateResult = schema.validate({\n        param: req.params[param]\n      });\n\n      if (validateResult.error) {\n        var err = new Error(validateResult.error);\n        err.status = 400;\n        return next(err);\n      } else {\n        req.params[param] = validateResult.value.param;\n        next();\n      }\n    } catch (err) {\n      next(err);\n    }\n  };\n};\n\nvar schemas = {\n  idUserSchema: Joi.object({\n    param: Joi.string().pattern(new RegExp("^(0|[1-9][0-9]*)$")).required()\n  }),\n  userSchemaSignUp: Joi.object({\n    username: Joi.string().alphanum().min(3).max(30).required(),\n    password: Joi.string().pattern(new RegExp("^[a-zA-Z0-9]{3,30}$")).required(),\n    confirm_password: Joi.string().pattern(new RegExp("^[a-zA-Z0-9]{3,30}$")).required(),\n    email: Joi.string().email({\n      minDomainSegments: 2,\n      tlds: {\n        allow: ["com", "net"]\n      }\n    }).required()\n  }),\n  userSchemaSignIn: Joi.object({\n    password: Joi.string().pattern(new RegExp("^[a-zA-Z0-9]{3,30}$")).required(),\n    email: Joi.string().email({\n      minDomainSegments: 2,\n      tlds: {\n        allow: ["com", "net"]\n      }\n    }).required()\n  }),\n  userSchemaUpdate: Joi.object({\n    username: Joi.string().alphanum().min(3).max(30).required(),\n    email: Joi.string().email({\n      minDomainSegments: 2,\n      tlds: {\n        allow: ["com", "net"]\n      }\n    }).required()\n  }),\n  userSchemaCreate: Joi.object({\n    avatar: Joi.string(),\n    username: Joi.string().alphanum().min(3).max(30).required(),\n    password: Joi.string().pattern(new RegExp("^[a-zA-Z0-9]{3,30}$")).required(),\n    confirm_password: Joi.string().pattern(new RegExp("^[a-zA-Z0-9]{3,30}$")).required(),\n    email: Joi.string().email({\n      minDomainSegments: 2,\n      tlds: {\n        allow: ["com", "net"]\n      }\n    }).required(),\n    status: Joi.number().valid(1, 10),\n    role_id: Joi.number().valid(1, 2, 3, 4)\n  }),\n  userSchemaChangePassword: Joi.object({\n    current_password: Joi.string().pattern(new RegExp("^[a-zA-Z0-9]{3,30}$")).required(),\n    new_password: Joi.string().pattern(new RegExp("^[a-zA-Z0-9]{3,30}$")).required(),\n    confirm_new_password: Joi.string().pattern(new RegExp("^[a-zA-Z0-9]{3,30}$")).required()\n  }),\n  userSchemaEditAvatar: Joi.object({\n    avatar: Joi.string()\n  })\n};\nmodule.exports = {\n  schemas: schemas,\n  validateBody: validateBody,\n  validateParam: validateParam\n};\n\n//# sourceURL=webpack://shoes_project/./src/middlewares/validateData.js?')},"./src/models/index.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval('\n\nvar fs = __webpack_require__(/*! fs */ "fs");\n\nvar path = __webpack_require__(/*! path */ "path");\n\nvar Sequelize = __webpack_require__(/*! sequelize */ "sequelize");\n\nvar basename = path.basename(__filename);\nvar env = "development" || 0;\n\nvar config = __webpack_require__(/*! ../configs/config.json */ "./src/configs/config.json")[env];\n\nvar db = {};\nvar sequelize;\n\nif (config.use_env_variable) {\n  sequelize = new Sequelize(process.env[config.use_env_variable], config);\n} else {\n  sequelize = new Sequelize(config.database, config.username, config.password, config);\n}\n\nfs.readdirSync(__dirname).filter(function (file) {\n  return file.indexOf(".") !== 0 && file !== basename && file.slice(-3) === ".js";\n}).forEach(function (file) {\n  var model = __webpack_require__("./src/models sync recursive")(path.join(__dirname, file))(sequelize, Sequelize.DataTypes);\n\n  db[model.name] = model;\n});\nObject.keys(db).forEach(function (modelName) {\n  if (db[modelName].associate) {\n    db[modelName].associate(db);\n  }\n});\ndb.sequelize = sequelize;\ndb.Sequelize = Sequelize;\nmodule.exports = db;\n\n//# sourceURL=webpack://shoes_project/./src/models/index.js?')},"./src/routes/auth.route.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval('var express = __webpack_require__(/*! express */ "express");\n\nvar router = express.Router();\n\nvar AuthController = __webpack_require__(/*! ../controllers/auth.controller */ "./src/controllers/auth.controller.js");\n\nvar _require = __webpack_require__(/*! ../middlewares/validateData */ "./src/middlewares/validateData.js"),\n    validateBody = _require.validateBody,\n    validateParam = _require.validateParam,\n    schemas = _require.schemas;\n\nrouter.route("/sign-up").get(AuthController.getFormSignUp).post(validateBody(schemas.userSchemaSignUp), AuthController.signUp);\nrouter.route("/sign-in").get(AuthController.getFormSignIn).post(validateBody(schemas.userSchemaSignIn), AuthController.signIn);\nrouter.route("/logout").get(AuthController.logout);\nmodule.exports = router;\n\n//# sourceURL=webpack://shoes_project/./src/routes/auth.route.js?')},"./src/routes/chatbot.route.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval('var express = __webpack_require__(/*! express */ "express");\n\nvar router = express.Router();\n\nvar ChatbotController = __webpack_require__(/*! ../controllers/chatbot.controller */ "./src/controllers/chatbot.controller.js");\n\nrouter.route("/webhook").get(ChatbotController.getWebhook).post(ChatbotController.postWebhook);\nmodule.exports = router;\n\n//# sourceURL=webpack://shoes_project/./src/routes/chatbot.route.js?')},"./src/routes/dashboard.route.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval('var express = __webpack_require__(/*! express */ "express");\n\nvar router = express.Router(); // const UserController = require("../controllers/user.controller");\n\nvar _require = __webpack_require__(/*! ../middlewares/auth */ "./src/middlewares/auth.js"),\n    authToken = _require.authToken,\n    authRole = _require.authRole;\n\nrouter.route("/").get(function (req, res) {\n  res.render("dashboard/dashboard", {\n    nav: "dashboard"\n  });\n});\nmodule.exports = router;\n\n//# sourceURL=webpack://shoes_project/./src/routes/dashboard.route.js?')},"./src/routes/user.route.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval('var express = __webpack_require__(/*! express */ "express");\n\nvar router = express.Router();\n\nvar handleFile = __webpack_require__(/*! ../middlewares/handleFile */ "./src/middlewares/handleFile.js");\n\nvar UserController = __webpack_require__(/*! ../controllers/user.controller */ "./src/controllers/user.controller.js");\n\nvar _require = __webpack_require__(/*! ../middlewares/validateData */ "./src/middlewares/validateData.js"),\n    validateBody = _require.validateBody,\n    validateParam = _require.validateParam,\n    schemas = _require.schemas;\n\nvar _require2 = __webpack_require__(/*! ../middlewares/auth */ "./src/middlewares/auth.js"),\n    authToken = _require2.authToken,\n    authRole = _require2.authRole;\n\nrouter.route("/").get(authToken, UserController.getAll);\nrouter.route("/create").get(authToken, UserController.getCreate).post(authToken, authRole([1]), handleFile("avatar"), validateBody(schemas.userSchemaCreate), UserController.create);\nrouter.route("/:id", validateParam(schemas.idUserSchema, "id")).get(authToken, UserController.getOne);\nrouter.route("/:id/edit", validateParam(schemas.idUserSchema, "id")).put(authToken, authRole([1]), validateBody(schemas.userSchemaUpdate), UserController.update).get(authToken, authRole([1]), UserController.getUpdate);\nrouter.route("/:id/change-password", validateParam(schemas.idUserSchema, "id")).put(authToken, authRole([1]), validateBody(schemas.userSchemaChangePassword), UserController.changePassword);\nrouter.route("/:id/edit-avatar", validateParam(schemas.idUserSchema, "id")).put(authToken, authRole([1]), handleFile("avatar"), validateBody(schemas.userSchemaEditAvatar), UserController.editAvatar);\nrouter.route("/:id/delete", validateParam(schemas.idUserSchema, "id"))["delete"](authToken, authRole([1]), UserController.remove);\nrouter.route("/:id/preview", validateParam(schemas.idUserSchema, "id")).get(authToken, authRole([1]), UserController.preview);\nmodule.exports = router;\n\n//# sourceURL=webpack://shoes_project/./src/routes/user.route.js?')},"./src/routes/web.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval('var express = __webpack_require__(/*! express */ "express");\n\nvar router = express.Router();\n\nvar authRoute = __webpack_require__(/*! ./auth.route */ "./src/routes/auth.route.js");\n\nvar dashboardRoute = __webpack_require__(/*! ./dashboard.route */ "./src/routes/dashboard.route.js");\n\nvar userRoute = __webpack_require__(/*! ./user.route */ "./src/routes/user.route.js");\n\nvar chatbot = __webpack_require__(/*! ./chatbot.route */ "./src/routes/chatbot.route.js");\n\nvar errorHandle = __webpack_require__(/*! ../middlewares/errorHandle */ "./src/middlewares/errorHandle.js");\n\nvar initRoute = function initRoute(app) {\n  router.use("/", authRoute);\n  router.use("/dashboard", dashboardRoute);\n  router.use("/users", userRoute);\n  router.use("/chatbot", chatbot); //handle error\n\n  router.use(errorHandle);\n  return app.use("/", router);\n};\n\nmodule.exports = initRoute;\n\n//# sourceURL=webpack://shoes_project/./src/routes/web.js?')},"./src/server.js":(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{eval('var express = __webpack_require__(/*! express */ "express");\n\nvar bodyParser = __webpack_require__(/*! body-parser */ "body-parser");\n\nvar dotenv = __webpack_require__(/*! dotenv */ "dotenv");\n\nvar morgan = __webpack_require__(/*! morgan */ "morgan");\n\nvar methodOverride = __webpack_require__(/*! method-override */ "method-override");\n\nvar cookieParser = __webpack_require__(/*! cookie-parser */ "cookie-parser");\n\nvar viewEngine = __webpack_require__(/*! ./configs/viewEngine */ "./src/configs/viewEngine.js");\n\nvar initRoute = __webpack_require__(/*! ./routes/web */ "./src/routes/web.js");\n\nvar connectDB = __webpack_require__(/*! ./configs/connectDB */ "./src/configs/connectDB.js");\n\nvar cors = __webpack_require__(/*! ./middlewares/cors */ "./src/middlewares/cors.js");\n\nvar ejs = __webpack_require__(/*! ejs */ "ejs");\n\ndotenv.config();\nvar app = express();\nvar port = process.env.PORT || 3000;\napp.use(morgan("dev"));\napp.use(bodyParser.json());\napp.use(bodyParser.urlencoded({\n  extended: true\n}));\napp.use(methodOverride("_method"));\napp.use(cookieParser());\napp.use(cors); //config views engine\n\nviewEngine(app); //init route\n\ninitRoute(app); //connect db\n\nconnectDB();\napp.listen(port, function () {\n  console.log("Server is listening http://localhost:".concat(port));\n});\n\n//# sourceURL=webpack://shoes_project/./src/server.js?')},"./src/services/user.service.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval('function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err); } _next(undefined); }); }; }\n\nvar db = __webpack_require__(/*! ../models/index */ "./src/models/index.js");\n\nvar bcrypt = __webpack_require__(/*! bcrypt */ "bcrypt");\n\nvar saltRounds = 10; //create new user\n\nvar createNewUser = function createNewUser(newUser) {\n  return new Promise( /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(resolve, reject) {\n      var salt, password_hash, user;\n      return regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return bcrypt.genSalt(10);\n\n            case 3:\n              salt = _context.sent;\n              _context.next = 6;\n              return bcrypt.hash(newUser.password, salt);\n\n            case 6:\n              password_hash = _context.sent;\n              _context.next = 9;\n              return db.User.create({\n                avatar: newUser.avatar || "default-avatar.jpg",\n                username: newUser.username,\n                password_hash: password_hash,\n                email: newUser.email,\n                status: newUser.status || 1,\n                role_id: newUser.role_id || 4\n              });\n\n            case 9:\n              user = _context.sent;\n              resolve({\n                status: "success",\n                message: "create new user: ".concat(user.id),\n                data: user\n              });\n              _context.next = 16;\n              break;\n\n            case 13:\n              _context.prev = 13;\n              _context.t0 = _context["catch"](0);\n              reject(_context.t0);\n\n            case 16:\n            case "end":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 13]]);\n    }));\n\n    return function (_x, _x2) {\n      return _ref.apply(this, arguments);\n    };\n  }());\n}; //get all user\n\n\nvar getAllUser = function getAllUser() {\n  return new Promise( /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2(resolve, reject) {\n      var res;\n      return regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.prev = 0;\n              _context2.next = 3;\n              return db.User.findAll({\n                attributes: ["id", "avatar", "username", "email", "status", "role_id"]\n              });\n\n            case 3:\n              res = _context2.sent;\n              resolve({\n                status: "success",\n                data: res\n              });\n              _context2.next = 10;\n              break;\n\n            case 7:\n              _context2.prev = 7;\n              _context2.t0 = _context2["catch"](0);\n              reject(_context2.t0);\n\n            case 10:\n            case "end":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, null, [[0, 7]]);\n    }));\n\n    return function (_x3, _x4) {\n      return _ref2.apply(this, arguments);\n    };\n  }());\n}; //get user by id\n\n\nvar getUser = function getUser(data) {\n  return new Promise( /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee3(resolve, reject) {\n      var res;\n      return regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.prev = 0;\n              _context3.next = 3;\n              return db.User.findOne({\n                attributes: ["id", "avatar", "username", "password_hash", "email", "status", "role_id"],\n                where: _objectSpread({}, data)\n              });\n\n            case 3:\n              res = _context3.sent;\n\n              if (!(res === null)) {\n                _context3.next = 6;\n                break;\n              }\n\n              throw new Error("User not found!");\n\n            case 6:\n              resolve({\n                status: "success",\n                data: res\n              });\n              _context3.next = 12;\n              break;\n\n            case 9:\n              _context3.prev = 9;\n              _context3.t0 = _context3["catch"](0);\n              reject(_context3.t0);\n\n            case 12:\n            case "end":\n              return _context3.stop();\n          }\n        }\n      }, _callee3, null, [[0, 9]]);\n    }));\n\n    return function (_x5, _x6) {\n      return _ref3.apply(this, arguments);\n    };\n  }());\n}; //count users\n\n\nvar countAndGetUsers = function countAndGetUsers() {\n  return new Promise( /*#__PURE__*/function () {\n    var _ref4 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee4(resolve, reject) {\n      var _yield$db$User$findAn, count, rows;\n\n      return regeneratorRuntime.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              _context4.prev = 0;\n              _context4.next = 3;\n              return db.User.findAndCountAll({\n                attributes: ["username", "email", "status", "role_id"] // offset: 10, same skip\n                // limit: 1,\n\n              });\n\n            case 3:\n              _yield$db$User$findAn = _context4.sent;\n              count = _yield$db$User$findAn.count;\n              rows = _yield$db$User$findAn.rows;\n              resolve({\n                status: "success",\n                data: {\n                  count: count,\n                  rows: rows\n                }\n              });\n              _context4.next = 12;\n              break;\n\n            case 9:\n              _context4.prev = 9;\n              _context4.t0 = _context4["catch"](0);\n              reject(_context4.t0);\n\n            case 12:\n            case "end":\n              return _context4.stop();\n          }\n        }\n      }, _callee4, null, [[0, 9]]);\n    }));\n\n    return function (_x7, _x8) {\n      return _ref4.apply(this, arguments);\n    };\n  }());\n}; //update user\n\n\nvar updateUser = function updateUser(data, user) {\n  return new Promise( /*#__PURE__*/function () {\n    var _ref5 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee5(resolve, reject) {\n      var _user, password, salt, password_hash, res;\n\n      return regeneratorRuntime.wrap(function _callee5$(_context5) {\n        while (1) {\n          switch (_context5.prev = _context5.next) {\n            case 0:\n              _context5.prev = 0;\n              _user = user, password = _user.password;\n\n              if (!password) {\n                _context5.next = 10;\n                break;\n              }\n\n              _context5.next = 5;\n              return bcrypt.genSalt(10);\n\n            case 5:\n              salt = _context5.sent;\n              _context5.next = 8;\n              return bcrypt.hash(password, salt);\n\n            case 8:\n              password_hash = _context5.sent;\n              user = _objectSpread(_objectSpread({}, user), {}, {\n                password_hash: password_hash\n              });\n\n            case 10:\n              _context5.next = 12;\n              return db.User.update(_objectSpread({}, user), {\n                where: _objectSpread({}, data)\n              });\n\n            case 12:\n              res = _context5.sent;\n\n              if (!(res < 1)) {\n                _context5.next = 15;\n                break;\n              }\n\n              throw new Error("Update fail!");\n\n            case 15:\n              resolve({\n                status: "success",\n                message: "update ".concat(res, " row")\n              });\n              _context5.next = 21;\n              break;\n\n            case 18:\n              _context5.prev = 18;\n              _context5.t0 = _context5["catch"](0);\n              reject(_context5.t0);\n\n            case 21:\n            case "end":\n              return _context5.stop();\n          }\n        }\n      }, _callee5, null, [[0, 18]]);\n    }));\n\n    return function (_x9, _x10) {\n      return _ref5.apply(this, arguments);\n    };\n  }());\n}; //delete user\n\n\nvar deleteUser = function deleteUser(data) {\n  return new Promise( /*#__PURE__*/function () {\n    var _ref6 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee6(resolve, reject) {\n      var res;\n      return regeneratorRuntime.wrap(function _callee6$(_context6) {\n        while (1) {\n          switch (_context6.prev = _context6.next) {\n            case 0:\n              _context6.prev = 0;\n              _context6.next = 3;\n              return db.User.destroy({\n                where: _objectSpread({}, data)\n              });\n\n            case 3:\n              res = _context6.sent;\n\n              if (!(res < 1)) {\n                _context6.next = 6;\n                break;\n              }\n\n              throw new Error("Remove fail!");\n\n            case 6:\n              resolve({\n                status: "success",\n                message: "remove ".concat(res, " row")\n              });\n              _context6.next = 12;\n              break;\n\n            case 9:\n              _context6.prev = 9;\n              _context6.t0 = _context6["catch"](0);\n              reject(_context6.t0);\n\n            case 12:\n            case "end":\n              return _context6.stop();\n          }\n        }\n      }, _callee6, null, [[0, 9]]);\n    }));\n\n    return function (_x11, _x12) {\n      return _ref6.apply(this, arguments);\n    };\n  }());\n}; //get field users\n\n\nvar getFieldUsers = function getFieldUsers(field) {\n  return new Promise( /*#__PURE__*/function () {\n    var _ref7 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee7(resolve, reject) {\n      var res;\n      return regeneratorRuntime.wrap(function _callee7$(_context7) {\n        while (1) {\n          switch (_context7.prev = _context7.next) {\n            case 0:\n              _context7.prev = 0;\n              _context7.next = 3;\n              return db.User.findAll({\n                attributes: field\n              });\n\n            case 3:\n              res = _context7.sent;\n              resolve({\n                status: "success",\n                data: res\n              });\n              _context7.next = 10;\n              break;\n\n            case 7:\n              _context7.prev = 7;\n              _context7.t0 = _context7["catch"](0);\n              reject(_context7.t0);\n\n            case 10:\n            case "end":\n              return _context7.stop();\n          }\n        }\n      }, _callee7, null, [[0, 7]]);\n    }));\n\n    return function (_x13, _x14) {\n      return _ref7.apply(this, arguments);\n    };\n  }());\n};\n\nmodule.exports = {\n  createNewUser: createNewUser,\n  getAllUser: getAllUser,\n  getUser: getUser,\n  countAndGetUsers: countAndGetUsers,\n  updateUser: updateUser,\n  deleteUser: deleteUser,\n  getFieldUsers: getFieldUsers\n};\n\n//# sourceURL=webpack://shoes_project/./src/services/user.service.js?')},"./src/util/handleJWT.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval('function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err); } _next(undefined); }); }; }\n\nvar dotenv = __webpack_require__(/*! dotenv */ "dotenv");\n\ndotenv.config();\n\nvar jwt = __webpack_require__(/*! jsonwebtoken */ "jsonwebtoken");\n\nvar enCodedToken = function enCodedToken(data, secret) {\n  return new Promise( /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(resolve, reject) {\n      var token;\n      return regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return jwt.sign(_objectSpread(_objectSpread({}, data), {}, {\n                iat: new Date().getTime()\n              }), secret, {\n                expiresIn: parseInt(process.env.TIME_EXP) * 1000 * 60\n              });\n\n            case 3:\n              token = _context.sent;\n              resolve(token);\n              _context.next = 10;\n              break;\n\n            case 7:\n              _context.prev = 7;\n              _context.t0 = _context["catch"](0);\n              reject(_context.t0);\n\n            case 10:\n            case "end":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 7]]);\n    }));\n\n    return function (_x, _x2) {\n      return _ref.apply(this, arguments);\n    };\n  }());\n};\n\nvar deCodedToken = function deCodedToken(token, secret) {\n  return new Promise( /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2(resolve, reject) {\n      var data;\n      return regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.prev = 0;\n              _context2.next = 3;\n              return jwt.verify(token, secret);\n\n            case 3:\n              data = _context2.sent;\n              resolve(data);\n              _context2.next = 10;\n              break;\n\n            case 7:\n              _context2.prev = 7;\n              _context2.t0 = _context2["catch"](0);\n              reject(_context2.t0);\n\n            case 10:\n            case "end":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, null, [[0, 7]]);\n    }));\n\n    return function (_x3, _x4) {\n      return _ref2.apply(this, arguments);\n    };\n  }());\n};\n\nmodule.exports = {\n  enCodedToken: enCodedToken,\n  deCodedToken: deCodedToken\n};\n\n//# sourceURL=webpack://shoes_project/./src/util/handleJWT.js?')},"./src/util/imgFilter.js":module=>{eval('var imageFilter = function imageFilter(req, file, cb) {\n  // Accept images only\n  if (!file.originalname.match(/\\.(jpg|JPG|jpeg|JPEG|png|PNG|gif|GIF)$/)) {\n    req.fileValidationError = "Only image files are allowed!";\n    return cb(new Error("Only image files are allowed!"), false);\n  }\n\n  cb(null, true);\n};\n\nmodule.exports = imageFilter;\n\n//# sourceURL=webpack://shoes_project/./src/util/imgFilter.js?')},"./src/util/storageDiskFile.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval('var multer = __webpack_require__(/*! multer */ "multer");\n\nvar path = __webpack_require__(/*! path */ "path");\n\nvar storage = function storage(pathStorage) {\n  return multer.diskStorage({\n    destination: function destination(req, file, cb) {\n      cb(null, pathStorage);\n    },\n    // By default, multer removes file extensions so let\'s add them back\n    filename: function filename(req, file, cb) {\n      cb(null, file.fieldname + "-" + Date.now() + path.extname(file.originalname));\n    }\n  });\n};\n\nmodule.exports = storage;\n\n//# sourceURL=webpack://shoes_project/./src/util/storageDiskFile.js?')},"./src/models sync recursive":module=>{eval('function webpackEmptyContext(req) {\n\tvar e = new Error("Cannot find module \'" + req + "\'");\n\te.code = \'MODULE_NOT_FOUND\';\n\tthrow e;\n}\nwebpackEmptyContext.keys = () => ([]);\nwebpackEmptyContext.resolve = webpackEmptyContext;\nwebpackEmptyContext.id = "./src/models sync recursive";\nmodule.exports = webpackEmptyContext;\n\n//# sourceURL=webpack://shoes_project/./src/models/_sync?')},bcrypt:e=>{"use strict";e.exports=require("bcrypt")},"body-parser":e=>{"use strict";e.exports=require("body-parser")},"cookie-parser":e=>{"use strict";e.exports=require("cookie-parser")},dotenv:e=>{"use strict";e.exports=require("dotenv")},ejs:e=>{"use strict";e.exports=require("ejs")},express:e=>{"use strict";e.exports=require("express")},joi:e=>{"use strict";e.exports=require("joi")},jsonwebtoken:e=>{"use strict";e.exports=require("jsonwebtoken")},"method-override":e=>{"use strict";e.exports=require("method-override")},morgan:e=>{"use strict";e.exports=require("morgan")},multer:e=>{"use strict";e.exports=require("multer")},sequelize:e=>{"use strict";e.exports=require("sequelize")},fs:e=>{"use strict";e.exports=require("fs")},path:e=>{"use strict";e.exports=require("path")},"./src/configs/config.json":module=>{"use strict";eval('module.exports = JSON.parse(\'{"development":{"username":"root","password":"","database":"shoes_db","host":"127.0.0.1","dialect":"mysql","logging":false},"test":{"username":"root","password":null,"database":"database_test","host":"127.0.0.1","dialect":"mysql"},"production":{"username":"root","password":null,"database":"database_production","host":"127.0.0.1","dialect":"mysql"}}\');\n\n//# sourceURL=webpack://shoes_project/./src/configs/config.json?')}},__webpack_module_cache__={};function __webpack_require__(e){var n=__webpack_module_cache__[e];if(void 0!==n)return n.exports;var r=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](r,r.exports,__webpack_require__),r.exports}__webpack_require__.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n);var __webpack_exports__=__webpack_require__("./src/server.js")})();